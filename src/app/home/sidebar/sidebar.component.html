<div id="sidebar" class="leaflet-sidebar collapsed">
  <div class="leaflet-sidebar-tabs">
    <ul role="tablist">
      <li><a href="#lines" role="tab"><i class="fa fa-bars"></i></a></li>
      <li><a href="#lines-nearest" role="tab"><i class="fa fa-map-marker"></i></a></li>
    </ul>
  </div>

  <div class="leaflet-sidebar-content">
    <div class="leaflet-sidebar-pane" id="lines">
      <h2 class="text-center mt-2">
        Líneas de Micros
      </h2>
      <div class="text-center row">
        <mat-form-field appearance="outline">
          <input
            matInput
            [(ngModel)]="searchText"
            placeholder="Buscar línea"
            autocomplete="off"
            (input)="onSearchText()"
          />
        </mat-form-field>
      </div>
      <app-lines-list [linesNames]="result" (lineSelected)="onLineSelected($event)"></app-lines-list>
    </div>

    <div class="leaflet-sidebar-pane" id="lines-nearest">
      <h2 class="text-center mt-2">
        Líneas cerca de mí
      </h2>
      <div class="text-center">
        <ng-container *ngIf="myLocation; else notMyLocation">
          <ng-container
            *ngIf="!loadingNearestLines; else loadingNearestLinesH"
          >
            <button
              class="btn btn-primary btn-block mx-1 mb-4"
              (click)="showNearestLinesRoutes()"
            >
              Ver líneas cerca de mí
            </button>
            <app-lines-list [linesNames]="linesNearest" (lineSelected)="onLineSelected($event)"></app-lines-list>
          </ng-container>
          <ng-template #loadingNearestLinesH>
            <div class="d-flex justify-content-center">
              <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Cargando...</span>
              </div>
            </div>
          </ng-template>
        </ng-container>
        <ng-template #notMyLocation>
          <div class="alert alert-danger">
            Active su ubicación primero...
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
